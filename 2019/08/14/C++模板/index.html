<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="libinxu">
  <!-- Open Graph Data -->
  <meta property="og:title" content="MonkeyDLee">
  <meta property="og:description" content="C/C++">
  <meta property="og:site_name" content="MonkeyDLee">
  <meta property="og:type" content="website">
  <meta property="og:image" content="http://yoursite.com">
  
    <link rel="alternate" href="/atom.xml" title="MonkeyDLee" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>MonkeyDLee</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">Untitled Post</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/MonkeyDLee">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:532900395@qq.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By libinxu</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2019-08-14</span>
            <span class="time">23:58:14</span>
          </span>
          
        </div>
        <!-- Tags -->
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h1 id="C-模板"><a href="#C-模板" class="headerlink" title="C++模板"></a>C++模板</h1><h3 id="泛型编程"><a href="#泛型编程" class="headerlink" title="泛型编程"></a>泛型编程</h3><p><strong>作为C++支持泛型的重要武器,模板被引入作为泛型编程的基础:</strong></p>
<p><strong>泛型编程：编写与类型无关的通用代码，是代码复用的一种手段。模板是泛型编程的基础。</strong></p>
<p><strong>模板又分为函数模板和类模板</strong></p>
<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><h3 id="函数模板"><a href="#函数模板" class="headerlink" title="函数模板"></a>函数模板</h3><h4 id="定义格式"><a href="#定义格式" class="headerlink" title="定义格式"></a>定义格式</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2,......,<span class="keyword">typename</span> Tn&gt;</span><br><span class="line">返回值类型 函数名(参数列表)&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">( T&amp; left, T&amp; right)</span> </span>&#123; T temp = left;</span><br><span class="line">left = right;</span><br><span class="line">right = temp; &#125;</span><br></pre></td></tr></table></figure>
<h4 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h4><p>编译器用使用方式产生特定具体类型函数的模具。所以其实模板 是将本来应该我们做的重复的事情交给了编译器</p>
<p><strong>在编译器编译阶段</strong>，对于模板函数的使用，<strong>编译器需要根据传入的实参类型来推演生成对应类型的函数</strong>以供 </p>
<p>调用。</p>
<h5 id="函数模板实例化"><a href="#函数模板实例化" class="headerlink" title="函数模板实例化:"></a>函数模板实例化:</h5><ul>
<li>隐式实例化：让编译器根据实参推演模板参数的实际类型，参数的类型要一致，要不需要显示实例化，或者参数列表添加参数</li>
<li>显式实例化：在函数名后的&lt;&gt;中指定模板参数的实际类型,如果类型不匹配，编译器会尝试进行隐式类型转换，如果无法转换成功编译器将会报错。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Add&lt;<span class="keyword">int</span>&gt; v;</span><br></pre></td></tr></table></figure>
<h5 id="模板参数匹配规则"><a href="#模板参数匹配规则" class="headerlink" title="模板参数匹配规则"></a>模板参数匹配规则</h5><ul>
<li>一个非模板函数可以和一个同名的函数模板同时存在，而且该函数模板还可以被实例化为这个非模板函数</li>
<li>对于非板函数和同名函数模板，如果其他条件都相同，在调动时会优先调用非模板函数而不会从该模板产生出一个实例。如果模板可以产生一个具有更好匹配的函数,那么将选择模板</li>
<li>模板函数不允许自动类型转换，但普通函数可以进行自动类型转换</li>
</ul>
<h3 id="类模板"><a href="#类模板" class="headerlink" title="类模板"></a>类模板</h3><h4 id="模板类的定义"><a href="#模板类的定义" class="headerlink" title="模板类的定义"></a>模板类的定义</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>, <span class="title">class</span> <span class="title">T2</span>, ..., <span class="title">class</span> <span class="title">Tn</span>&gt; </span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> 类模板名 </span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 类内成员定义 </span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>注意：类模板中函数放在类外进行定义时，需要加模板参数列表</strong></p>
<h5 id="类模板的实例化"><a href="#类模板的实例化" class="headerlink" title="类模板的实例化"></a>类模板的实例化</h5><p>类模板实例化与函数模板实例化不同，类模板实例化需要在类模板名字后跟<strong>&lt;&gt;</strong>，然后将实例化的类型放在&lt;&gt;</p>
<p>中即可，类模板名字不是真正的类，而实例化的结果才是真正的类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br></pre></td></tr></table></figure>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充:"></a>补充:</h3><h5 id="非类型模板参数"><a href="#非类型模板参数" class="headerlink" title="非类型模板参数:"></a>非类型模板参数:</h5><p><strong>类型形参即</strong>：出现在模板参数列表中,跟在<strong>class</strong>或者<strong>typename</strong>之类的参数类型名称。 </p>
<p><strong>非类型形参</strong> :  就是用一个常量作为类(函数)模板的一个参数，在类(函数)模板中可将该参数当成常量来使用。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, <span class="title">size_t</span> <span class="title">N</span> <span class="title">N</span> = 10&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong> </p>
<ul>
<li>浮点数、类对象以及字符串是不允许作为非类型模板参数的。 </li>
<li>非类型的模板参数必须在编译期就能确认结果。 </li>
</ul>
<h5 id="类模板的特化"><a href="#类模板的特化" class="headerlink" title="类模板的特化"></a><strong>类模板的特化</strong></h5><h5 id="全特化"><a href="#全特化" class="headerlink" title="全特化"></a>全特化</h5><p>全特化即是将模板参数类表中所有参数都确定话</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>, <span class="title">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Data</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">template</span>&lt;&gt;</span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Data</span>&lt;int, char&gt;</span></span><br></pre></td></tr></table></figure>
<p> <strong>偏特化</strong> </p>
<p>偏特化：任何针对模版参数进一步进行条件限制设计的特化版本。比如对于以下模板类：</p>
<p>偏特化有以下两种表现方式： </p>
<h6 id="部分特化"><a href="#部分特化" class="headerlink" title="部分特化"></a>部分特化</h6><p>将模板参数类表中的一部分参数特化。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将第二个参数特化为int </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>&gt; </span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Data</span>&lt;T1, int&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="参数更进一步的限制"><a href="#参数更进一步的限制" class="headerlink" title="参数更进一步的限制"></a>参数更进一步的限制</h6><p>偏特化并不仅仅是指特化部分参数，而是针对模板参数更进一步的条件限制所设计出来的一个特化版本。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span> &lt;T1*, T2*&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="类模板特化应用之类型萃取"><a href="#类模板特化应用之类型萃取" class="headerlink" title="类模板特化应用之类型萃取"></a>类模板特化应用之类型萃取</h5><p>应用：解决拷贝问题：</p>
<h5 id="模板的分离编译"><a href="#模板的分离编译" class="headerlink" title="模板的分离编译"></a>模板的分离编译</h5><p>不支持直接分离编译，可以显示实例化（不推荐）；链接时出错</p>
<h4 id="模板的优缺点"><a href="#模板的优缺点" class="headerlink" title="模板的优缺点"></a>模板的优缺点</h4><p><strong>【优点】</strong> </p>
<p> 模板复用了代码，节省资源，更快的迭代开发，C++的标准模板库(STL)因此而产生</p>
<p>增强了代码的灵活性 </p>
<p><strong>【缺陷】</strong> </p>
<p> <strong>模板会导致代码膨胀问题，也会导致编译时间变长</strong> </p>
<p> <strong>出现模板编译错误时，错误信息非常凌乱，不易定位错误</strong> </p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        </p><p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  <script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>

